<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{title}}</title>
  <style>
    ul { list-style-type: none; padding: 0; }
    li { margin-bottom: 20px; border-bottom: 1px solid #ccc; padding-bottom: 10px; }
    .meta { font-size: 0.9em; color: #555; }
    button, a { margin-right: 10px; }
  </style>
</head>
<body>
  <h1>Your Journal Entries</h1>
  <a href="/dairy">Add New Entry</a>
  <ul>
    {{#each entries}}
      <li>
        <p>{{this.content}}</p>
        <div class="meta">{{this.createdAt}}</div>
        <a href="/edit/{{this._id}}">Edit</a>
        <button onclick="deleteEntry('{{this._id}}')">Delete</button>
      </li>
    {{else}}
      <li>No entries yet. <a href="/dairy">Write your first entry</a></li>
    {{/each}}
  </ul>

  <script>
    async function deleteEntry(id) {
      if (!confirm("Are you sure you want to delete this entry?")) return;

      const res = await fetch(`/api/entries/${id}`, { method: 'DELETE' });
      if (res.ok) {
        location.reload();
      } else {
        alert('Failed to delete entry.');
      }
    }
  </script>
</body>
</html>
